add_namespace = pci_events

# End of Civil War, event for SOV
country_event = {
	id = pci_events.1
	title = pci_events.1.t
	desc = pci_events.1.desc
	picture = GFX_report_event_soviet_italy
	
	is_triggered_only = yes
	
	option = { # Ok
		name = pci_events.1.a
		effect_tooltip = {
			puppet = PCI
		}
		hidden_effect = {
			set_autonomy = {
				target = ITA
				autonomy_state = autonomy_SOVsatellite
			}
		}
	}
}

# End of civil war, PCI won now what!
country_event = {
	id = pci_events.2
	title = pci_events.2.t
	desc = pci_events.2.desc
	picture = GFX_report_event_soviet_italy
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			SOV = { puppet = PCI }
		}
	}
	
	option = { # Ok
		name = pci_events.2.a
		effect_tooltip = {
			SOV = { puppet = PCI }
		}
		hidden_effect = {
			SOV = {
				set_autonomy = {
					target = ITA
					autonomy_state = autonomy_SOVsatellite
				}
			}
		}
	}
}
# Appeal for Increased Autonomy - Event for SOV
country_event = {
	id = pci_events.3
	title = pci_events.3.t
	desc = pci_events.3.desc
	picture = GFX_report_event_generic_parliament
	
	is_triggered_only = yes
	
	option = { # Accept only option
		name = pci_events.3.a
		hidden_effect = {
			FROM = {
				country_event = { id = pci_events.4 }
			}
		}
		add_timed_idea = {
			idea = PCI_debt_paid
			days = 720
		}
	}
}

# Appeal for Increased Autonomy - Event for PCI - SOV accepted
country_event = {
	id = pci_events.4
	title = pci_events.4.t
	desc = pci_events.4.desc
	picture = GFX_report_event_generic_sign_treaty3
	
	is_triggered_only = yes
	
	option = { # Ok
		name = pci_events.4.a
		effect_tooltip = {
			FROM = { end_puppet = ROOT }
		}
	}
}

#Ally Tito Event - Yugoslavia not communist
country_event = {
	id = pci_events.5
	title = pci_events.5.t
	desc = pci_events.5.desc
	picture = GFX_report_event_yugoslavia_partisans

	is_triggered_only = yes
	
	option = {
		name = pci_events.5.a
		add_stability = -0.05
		custom_effect_tooltip = LVN_tito_backed_guerilla_war_tt
		hidden_effect = { 
			start_civil_war = {
				ruling_party = neutrality
				ideology = communism
				size = 0.2
				capital = 108
				states = { 108 106 802 803 }
			}
			if = {
				limit = {
					NOT = {
						YUG = { has_war_with = PCI }
					}
				}
				YUG = {
					declare_war_on = {
						target = PCI
						type = topple_government
					}
				}
			}
			random_other_country = {
				limit = {
					original_tag = YUG
					has_government = communism
				}
				add_ai_strategy = {
					type = alliance
					id = SOV
					value = -200
				}
				set_stability = 0.5
				set_war_support = 0.8
				#PCI = { add_to_faction = ROOT } 
			}
		}	
	}
}

#Ask to annex communist faction members
country_event = {
	id = pci_events.6
	title = pci_events.6.t
	desc = pci_events.6.desc
	picture = GFX_report_event_yugoslavia_partisans

	is_triggered_only = yes
	
	option = { #Accept
		name = pci_events.6.a
		PCI = { country_event = { id = pci_events.7 hours = 5 random = 100 } }
		if = {
			limit = {
				tag = GRE
			}
			every_unit_leader = {
				limit = {
					has_trait = trait_GRE_stauch_monarchist
				}
				retire = yes
			}
		}

	}
	
}

#Event to annex the communist faction
country_event = {
	id = pci_events.7
	title = pci_events.7.t
	desc = pci_events.7.desc
	picture = GFX_report_event_yugoslavia_partisans

	is_triggered_only = yes
	
	option = { #Hooray!
		name = pci_events.7.a
		FROM = {
			every_unit_leader = {
				set_nationality = PCI
			}
		}
		every_state = {
			limit = {
				is_core_of = FROM
			}
			add_core_of = PCI
		}
		PCI = {
			annex_country = {
				target = FROM
				transfer_troops = yes
			}
		}

	}
	
}

#Ally Hoxha Event - Albania not communist
country_event = {
	id = pci_events.8
	title = pci_events.8.t
	desc = pci_events.8.desc
	picture = GFX_report_event_yugoslavia_partisans

	is_triggered_only = yes
	
	option = {
		name = pci_events.8.a
		add_stability = -0.05
		custom_effect_tooltip = LVN_hoxha_backed_guerilla_war_tt
		hidden_effect = { 
			start_civil_war = {
				ideology = communism
				size = 0.3
			}

			random_other_country = {
				limit = {
					original_tag = ALB
					has_government = communism
				}
				add_ai_strategy = {
					type = alliance
					id = SOV
					value = -200
				}
				set_stability = 0.5
				set_war_support = 0.8
				#PCI = { add_to_faction = ROOT } 
			}
		}	
	}
}

#Ally Greece Event - Greece not communist
country_event = {
	id = pci_events.9
	title = pci_events.9.t
	desc = pci_events.9.desc
	picture = GFX_report_event_yugoslavia_partisans

	is_triggered_only = yes
	
	option = {
		name = pci_events.9.a
		add_stability = -0.05
		custom_effect_tooltip = LVN_greece_backed_guerilla_war_tt
		hidden_effect = { 
			start_civil_war = {
				ruling_party = ROOT
				ideology = communism
				size = 0.3
				capital = 185
				states = { 185 }
			}

			random_other_country = {
				limit = {
					original_tag = GRE
					has_government = communism
				}
				add_ai_strategy = {
					type = alliance
					id = SOV
					value = -200
				}
				set_stability = 0.5
				set_war_support = 0.8
				#PCI = { add_to_faction = ROOT } 
			}
		}	
	}
}

#PCI offer to Stalin
country_event = {
	id = pci_events.10
	title = pci_events.10.t
	desc = pci_events.10.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		original_tag = SOV
	}
	
	option = {
		name = pci_events.10.a
		ai_chance = { factor = 5 }
		add_tech_bonus = {
			name = PCI_sharing_ship_bonus
			bonus = 1.0
			uses = 1
			category = cl_tech
		}
		add_tech_bonus = {
			name = PCI_sharing_ship_bonus
			bonus = 1.0
			uses = 1
			category = bb_tech
		}
	}
	option = {
		name = pci_events.10.b
		ai_chance = { factor = 10 }
		add_political_power = 50
	}
}

#Sell planes to Paraguay
country_event = {
	id = pci_events.11
	title = pci_events.11.t
	desc = pci_events.11.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #They accept
		name = pci_events.11.a
		ai_chance = { factor = 1 }
		PCI = { country_event = { id = pci_events.12 days = 2 } }
	}
	
	option = {#They refuse
		name = pci_events.11.b
		ai_chance = { factor = 0.02 }
		add_political_power = 50
	}
}

#Pick the planes
country_event = {
	id = pci_events.12
	title = pci_events.12.t
	desc = pci_events.12.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #Full send
		name = pci_events.12.a
		trigger = {
			has_equipment = { tri_engine_bomber_equipment_1 > 60 }
			has_equipment = { fighter_equipment > 60 }	
		}
		ai_chance = { factor = 1 }
		if = {
			limit = {
				has_equipment = { tri_engine_bomber_equipment_1 > 60 }
			}
			send_equipment = {
				equipment = tri_engine_bomber_equipment_1
				amount = 60
				target = PAR
			}
		}
		if = {
			limit = {
				has_equipment = { fighter_equipment > 60 }
			}
			send_equipment = {
				equipment = fighter_equipment
				amount = 60
				target = PAR
			}
		}
		add_timed_idea = { idea = PCI_sold_planes days = 365 }
	}
	
	option = { #Smaller Send
		name = pci_events.12.b
		ai_chance = { factor = 1 }
		trigger = {
			has_equipment = { tri_engine_bomber_equipment_1 < 60 }
			has_equipment = { fighter_equipment < 60 }	
		}
		if = {
			limit = {
				has_equipment = { tri_engine_bomber_equipment_1 > 10 }
			}
			send_equipment = {
				equipment = tri_engine_bomber_equipment_1
				amount = 10
				target = PAR
			}
		}
		if = {
			limit = {
				has_equipment = { fighter_equipment > 25 }
			}
			send_equipment = {
				equipment = fighter_equipment
				amount = 25
				target = PAR
			}
		}
		add_timed_idea = { idea = PCI_sold_planes days = 365 }
	}
}

#PCI Support for war with Bolivia (Proxy War)
country_event = {
	id = pci_events.13
	title = pci_events.13.t
	desc = pci_events.13.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #
		name = pci_events.13.a
		create_wargoal = {
			type = annex_everything
			target = BOL
		}
		PCI = {
			send_equipment = {
				equipment = infantry_equipment
				amount = 500
				target = PAR
			}
		}
	}	
}

#Communist party in Mexico seizes power (non-Trotsky)
country_event = {
	id = pci_events.14
	title = pci_events.14.t
	desc = pci_events.14.desc
	picture = GFX_report_event_mex_communism

	is_triggered_only = yes
	fire_only_once = yes
	
	option = { #
		name = pci_events.14.a
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		PCI = {
			country_event = { id = generic.2 days = 2 }
		}
	}	
}

#USA warns you to leave Latin America alone!
country_event = {
	id = pci_events.15
	title = pci_events.15.t
	desc = pci_events.15.desc
	picture = GFX_report_event_usa_hull

	is_triggered_only = yes
	
	option = { #Ignore their warning
		name = pci_events.15.a
		add_threat = 10
		USA = {
			add_opinion_modifier = {
				target = PCI
				modifier = protest_action_strong
			}
		}
	}

	option = { #Accept their warning, lose PP
		name = pci_events.15.b
		add_political_power = -100
		set_country_flag = PCI_caved_to_america
	}	
}
