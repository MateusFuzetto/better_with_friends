on_actions = {
 	on_state_control_changed = { #whats this
		effect = { 
			if = {
				limit = {
					FROM.FROM = { state = 2 }
					ROOT = { tag = ITA }
					FROM = { 
						tag = RSI 
						has_civil_war = yes
						OR = {
							is_in_faction_with = GER
							is_subject_of = GER
							has_volunteers_amount_from = {
								tag = GER
								count > 1
							}
						}
					}
					has_global_flag = LVN_we_lost_rome
					NOT = { has_global_flag = pius_xi_died }
				}
					ROOT = { country_event = italia_ita.116 }
			}
		}
	}
	on_startup = {
		effect = {
			every_state = {
				limit = {
					is_fully_controlled_by = ENG 
					OR = {
						region = 128 #Egypt
						region = 28  #Egypt     
						region = 126 #North Africa
					}
				}
				set_state_flag = ENG_north_africa_flag
			}
			every_state = {
				limit = {
					is_core_of = ITA 
					NOT = { state = 114 }
					NOT = { state = 115 }
				}
				set_state_flag = LVN_mainland_italy
			}
			every_state = {
				limit = {
					OR = {
						state = 448
						state = 661
						state = 449
						state = 662
						state = 450
						state = 451
						state = 663
						state = 452
						state = 447
						state = 446
					}
				}
				add_to_array = { global.LVN_NA_states = THIS.id }
			}
			
			set_province_name = {
				id = 11564
				name = Su≈°ak
			}
		}
		effect = {
			if = {
				limit = {
					has_game_rule = {
						rule = LVN_LIBYA_STATUS
						option = LVN_LIBYA_ANNEXED
					}
				}
				ITA = {
					annex_country = {
						target = LBA
						transfer_troops = no
					}
					delete_unit_template_and_units = {
						division_template = "Divisione Libia Coloniale"
						disband = no #will NOT refund equipment and manpower
					}
				}
			}
		}
		effect = { #New Victory Points for Italy
			if = {
				limit = {
					has_game_rule = {
						rule = lvn_ex_victory_points
						option = DEFAULT
					}
				}
				add_victory_points = {
					province = 4014 #Catania
					value = 3
				}
				add_victory_points = {
					province = 11998 #Brindisi might be useful later!
					value = 3
				}
				add_victory_points = {
					province = 9990 #Reggio Calabria
					value = 3
				}
				add_victory_points = {
					province = 9784 #Bari
					value = 3
				}
				add_victory_points = {
					province = 883 #Foggia
					value = 3
				}
				add_victory_points = {
					province = 955 #Salerno
					value = 4
				}
				add_victory_points = {
					province = 6831 #Pescara
					value = 4
				}
				add_victory_points = {
					province = 967 #Pesaro
					value = 4
				}
				add_victory_points = {
					province = 3604 #Verona
					value = 4
				}
				add_victory_points = {
					province = 9598 #Trento
					value = 4
				}
				add_victory_points = {
					province = 9752 #Parma
					value = 4
				}
				add_victory_points = {
					province = 9741 #Alessandria
					value = 4
				}
				add_victory_points = {
					province = 603 #Salo
					value = 4
				}
			}
		}
	}
	on_state_control_changed = { 
		effect = {
			if = {
				limit = {
					ROOT = {
						original_tag = ITA
						OR = {
							has_government = fascism
							has_government = neutrality
							}
					}
					FROM.FROM = {
						state = 271
					}
				}
				FROM.FROM = { set_state_name = "Etiopia italiana" }
			}
			
			if = {#reset state name for anything we've changed
				limit = {
					FROM = {
						original_tag = ITA
					}
					ROOT = {
						NOT = { is_subject_of = ITA }
						}
				}					
				FROM.FROM = { reset_state_name = yes }
			}	
			
			if = {#remove AOI cores
				limit = {
					FROM = {
						tag = AOI
					}
					FROM.FROM = {
						is_core_of = AOI
					}
				}					
				FROM.FROM = { remove_core_of = AOI }
			}
			if = {#add back AOI cores
				limit = {
					AOI = { exists = yes }
					FROM.FROM = {
						OR = {
							state = 550
							state = 559
							state = 271
						}
					}
					ROOT = {
						or = {
							tag = AOI
							original_tag = ITA 
							is_subject_of = ITA 
						}
					}
				}					
				FROM.FROM = { add_core_of = AOI }
			}			
		} 
	}

	on_annex = {
		effect = {
			if = {
				limit = {
					has_global_flag = arab_revolts
					ROOT = { original_tag = ENG }
					FROM = { original_tag = PAL }
				}
				clr_global_flag = arab_revolts #clear this flag
			}
		}
	}	
	
	on_nuke_drop = {

		effect = {
			if = {
				limit = {
					not = { original_tag = ITA }
					FROM = { 
						state = 2 #Special flag if bad guys nuke Rome
						is_core_of = CONTROLLER
					}					
				}
				set_global_flag = LVN_rome_nuked_by_enemy
			}

			if = {
				limit = {
					original_tag = ITA
					has_war_with = USA
					FROM = { state = 2 } #Special flag if we nuke NYC			
				}
				set_country_flag = LVN_achievement_nuked_little_italy
			}
			
			if = {
				limit = {
					not = { original_tag = ITA }
					FROM = { 
						state = 2 
						is_fully_controlled_by = ITA
					}
					ITA = { 
						is_ai = no 
						has_idea = italia_victor_emmanuel 
					}
				}
				ROOT = {
					set_country_flag = haha_we_bombed_rome
					ITA = { country_event = { id = italia_ita.84 hours = 5 random_hours = 24 } }
				}
			}

		}

			
	}


}#Main Closing
