ITALIA_royal_support_decisions= {

	italia_mission_king_deposes_mussolini = {#King deposes Mussolini because of low opinion
		
		priority = 2000
		
		days_mission_timeout = 60
		
		allowed = { original_tag = ITA }
		
		available = {
			custom_trigger_tooltip = {
				tooltip = LVN_king_opinion_back_up
				check_variable = {
					var = king_opinion_level
					value = 55
					compare = greater_than
				}
            }
        }
		
		is_good = no
		
		visible = {
			original_tag = ITA
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
		}
		
		activation = {# king's opinion falling too low
			has_country_flag = we_activate_this_by_event_LVN
		}
		
		timeout_effect = {
			set_country_flag = king_deposes_mussolini_opinion
			country_event = italia_ita.1
		}
		
		complete_effect = {
			clr_country_flag = king_depose_mussolini_opinion
			custom_effect_tooltip = king_mission_buys_time
	  		set_variable = { var = king_opinion_level value = 65 }			
		}
		
	}
	
	LVN_buy_time_remove_muss = {
	
		cost = 50
		icon = GFX_decision_mussolini
		priority = 1000
		allowed = { tag = ITA }
		available = {
			has_country_leader = { name = "Benito Mussolini" ruling_only = yes }
		}
		
		visible = { 
			has_active_mission = italia_mission_king_deposes_mussolini 
			has_country_leader = { name = "Benito Mussolini" ruling_only = yes }
			NOT = { has_country_flag = LVN_rome_nuked_by_enemy }
			is_ai = no
		}
	
		fire_only_once = yes
		days_remove = 2
		
		modifier = {
			political_power_factor = -1
		}
		
		complete_effect = {
			set_country_flag = removing_mussolini_to_buy_time
			custom_effect_tooltip = lvn_this_will_buy_time_king
			if = {
				limit = {
					NOT = { has_global_flag = italia_balbo_dead }
				}
				add_stability = -0.10
				add_popularity = {
					ideology = fascism
					popularity = -0.10
				}
			}
			else_if = {
				add_stability = -0.15
				add_popularity = {
					ideology = fascism
					popularity = -0.10
				}
			}
		}
		
		remove_effect = {
			country_event = italia_ita.81
		}
	
	}


	italia_mission_save_mafalda = {

		icon = generic_tank
		
		priority = 1000
		
		days_mission_timeout = 365
		
		available = {
			NOT = { has_global_flag = mafalda_is_dead }
			OR = {
				has_country_flag = mafalda_safe_and_sound
				60 = {
					is_controlled_by_ROOT_or_subject = yes 
				}
				GER = { 
					OR = {
						is_subject_of = ROOT 
						LVN_we_beat_this_bad_boy = yes 
					}
				}				
			}
		}
		
		days_remove = 5
		
		is_good = no
		
		fire_only_once = yes
		
		visible = {
			tag = ITA
			has_country_flag = save_mafalda_mission_active
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
		}

		activation = {
			tag = ITA
			has_country_flag = save_mafalda_mission_active
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
		}
		
		
		timeout_effect = {
			custom_effect_tooltip = king_mission_bad
	  		add_to_variable = { var = king_opinion_level value = -10 }
			custom_effect_tooltip = mafalda_fate_uncertain_tt
			hidden_effect = {
				ITA = { country_event = { id = italia_ita.21 days = 2 random = 30 } }
				}
			}			

		complete_effect = {
			custom_effect_tooltip = king_mission_good
	  		add_to_variable = { var = king_opinion_level value = 15 }
			}
		}

	italia_armistice = {

		allowed = {
			original_tag = ITA
		}

		available = {
			#has_navy_size = { size < 40 }
			custom_trigger_tooltip = {
			tooltip = north_africa_over_tt
				NOT = {
					any_state = {
						region = 126
						is_controlled_by = ROOT 
					}
				}
			}
			NOT = { controls_state = 115 }
		}

		visible = {
			has_war = yes
			is_ai = yes
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
			any_enemy_country = {
				is_major = yes
				OR = {
					tag = ENG
					tag = USA
					is_in_faction_with = ENG
					is_in_faction_with = USA
					}
				}
		}

		cost = 0

		days_remove = -1
		ai_will_do = {
			factor = 100
			#modifier = {
			#	NOT = {
			#		controls_state = 525
			#		controls_state = 527
			#	}
			#	factor = 10
			#}
		}

		complete_effect = {
			random_enemy_country = {
				limit = {
					is_faction_leader = yes
				}
			country_event = { id = italia_ita.19 days = 2 }
			}
		}
	}

	italia_finish_ethiopia_king = {

		icon = generic_tank
		
		priority = 20
		
		days_mission_timeout = 180
		
		allowed = { tag = ITA }
		
		available = {
			OR = {
				FROM = {
					is_subject_of = ITA 
				}
				ROOT = {
					owns_state = 271
				}
			}
		}
		
		days_remove = 5
		
		is_good = no
		
		fire_only_once = yes
		
		visible = {
			tag = ITA
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
				}
		
		activation = {
			always = no
		}
		
		
		timeout_effect = {
			custom_effect_tooltip = king_mission_bad
	  		add_to_variable = { var = king_opinion_level value = -7 }
			}

		cancel_trigger = {
			OR = {
				NOT = { has_government = fascism }
				AND = {
					has_war_with = ETH
					550 = { NOT = { is_controlled_by = ROOT } }
					559 = { NOT = { is_controlled_by = ROOT } }
				}
				AND = {
					NOT = { has_war_with = ETH }
					ETH = { is_subject = no }
					271 = { is_controlled_by = ETH }
				}
					
				hidden_trigger = { has_country_flag = ITA_fascist_war }
			}
		}
		
		complete_effect = {
			custom_effect_tooltip = king_mission_good
	  		add_to_variable = { var = king_opinion_level value = 8 }
		}
			
		cancel_effect = {
			if = {
				limit = {	
					has_government = fascism
					NOT = { has_country_flag = ITA_fascist_war }
				}
			custom_effect_tooltip = king_mission_bad
	  		add_to_variable = { var = king_opinion_level value = -7 }
			}
		}
			
	}

	italia_finish_minor_war_king = {

		icon = generic_tank
		
		priority = 9
		days_remove = 5
		days_mission_timeout = 180
		
		available = {
			hidden_trigger = {
				NOT = {
					FROM = { TAG = ETH }
				}
			}
			NOT = { has_war_with = FROM }
			OR = {
				FROM = {
					is_puppet_of = ITA 
				}
				FROM = {
					has_capitulated = yes 
				}
			}
		}

		is_good = no

		visible = {
			tag = ITA
			NOT = { has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
		}
		
		fire_only_once = yes

		activation = {
			always = no 
		}
		
		cancel_trigger = {
			OR = {
				AND = {
					NOT = { has_war_with = FROM }
					OR = {
						FROM = {
							NOT = {	is_puppet_of = ITA } 
						}
						FROM = {
							NOT = { has_capitulated = yes } 
						}
					}
				}
				FROM = {
					any_allied_country = { is_major = yes }
				}
			}
		}
		
		timeout_effect = {
			custom_effect_tooltip = king_mission_bad
	  		add_to_variable = { var = king_opinion_level value = -7 }
			}			

		complete_effect = {
			custom_effect_tooltip = king_mission_good
	  		add_to_variable = { var = king_opinion_level value = 5 }
			}
	}
	
	italia_adalberto_command = { 
		icon = GFX_decision_generic_naval
		cost = 25
		priority = 5

		available = {
			original_tag = ITA
			has_war = yes
		}

		visible = {
			original_tag = ITA
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
			}

		fire_only_once = yes


		modifier = {

		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 5
				has_war = no 
			}			
			modifier = {
				factor = 3
				has_war = yes
			}
		}

		complete_effect = {
			set_global_flag = LVN_adalberto_recruited
			show_unit_leaders_tooltip = ITA_Adalberto
			if = {
				limit = {
					has_idea = italia_victor_emmanuel 
				}
				custom_effect_tooltip = King_opinion_good
				add_to_variable = { var = king_opinion_level value = 10 }	
			}
		}
	}
	
	italia_umberto_command = { 
		icon = generic_army_support
		cost = 25
		priority = 10

		available = {
			original_tag = ITA
			has_war = yes
		}

		visible = {
			original_tag = ITA
			NOT = {
			has_country_leader = {
			name = "Umberto II"
			ruling_only = yes
					}
				}
			NOT = { has_idea = king_umberto}
			NOT = { has_unit_leader = 800 }
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
			}

		fire_only_once = yes


		modifier = {

		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 5
				has_war = no 
			}			
			modifier = {
				factor = 3
				has_war = yes
			}
		}

		complete_effect = {
			set_global_flag = umberto_promoted
			show_unit_leaders_tooltip = ITA_umberto
			if = {
				limit = {
					has_idea = italia_victor_emmanuel 
				}
				custom_effect_tooltip = King_opinion_good
				add_to_variable = { var = king_opinion_level value = 10 }	
			}
		}
	}
		
	italia_establish_croatia_decision = { 
		icon = generic_form_nation
		cost = 25

		available = {
			original_tag = ITA
			custom_trigger_tooltip = {
			tooltip = croatia_trigger_tooltip_tt
			109 = { is_controlled_by_ROOT_or_subject = yes }
				}
			}

		visible = {
			original_tag = ITA
			OR = {
			has_government = fascism
			has_government = neutrality }
			NOT = {	has_country_flag = ITA_fascist_war }
			NOT = {	has_country_flag = ITA_communist_war }
			OR = {
				AND = {
					all_of_scopes = {
						array = CRO.core_states
						is_owned_by = CRO
					}
					CRO = { is_subject_of = ROOT }
				}
				all_of_scopes = {
					array = CRO.core_states
					is_fully_controlled_by = ROOT
				}
			}		
		}

		fire_only_once = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 5
				has_war = no 
			}			
			modifier = {
				factor = 3
				has_war = yes
			}
		}

		complete_effect = {
			if = {
				limit = { 
				has_government = fascism
				CRO = { is_subject_of = ITA } }
			add_ideas = croatia_aimone_king
			}
			
			else_if = {
				limit = { 
				has_government = neutrality
				CRO = { is_subject_of = ITA } }
			CRO = {
			create_country_leader = {
				name = "Aimone di Aosta"
				desc = "POLITICS_CHARLES_DE_GAULLE_DESC"
				picture = "Portrait_ITA_Aimone_Di_Aosta.dds"
				expire = "1965.1.1"
				ideology = fascism_ideology
				traits = {
					unpopular_monarch
						}
					}
				}
			}
			
			else_if = {
				limit = {
					ITA = { controls_state = 109 }
					CRO = { NOT = { is_subject_of = ITA } }
					}
			set_temp_variable = { country_to_initiate = CRO }
			instantiate_collaboration_government = yes
			CRO = {
				add_ideas = croatia_aimone_king }				
			}
			
			custom_effect_tooltip = King_opinion_good
			add_to_variable = { var = king_opinion_level value = 10 }
		}
		
	}
		

	
}#Closing bracket

